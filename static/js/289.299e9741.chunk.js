"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[289],{9289:function(e,n,s){s.r(n);var r=s(1413),t=s(3433),a=s(9439),o=s(2791),i=s(1134),u=s(4695),l=s(5068),c=s(6727),d=s(184),v=o.memo((function(e){return(0,d.jsx)("div",{children:(0,d.jsx)(h,{})})})),h=function(){var e=(0,o.useState)(null),n=(0,a.Z)(e,2),s=n[0],r=n[1];return(0,o.useEffect)((function(){var e,n=function(){setTimeout(s,3e3)};function s(){var s,t;null===(s=e)||void 0===s||s.removeEventListener("close",n),null===(t=e)||void 0===t||t.close(),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",n),r(e)}return s(),function(){e.removeEventListener("close",n),e.close()}}),[]),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:{backgroundColor:"lightgrey",padding:"10px"},children:(0,d.jsx)(f,{wsChanel:s})}),(0,d.jsx)(x,{wsChanel:s})]})},f=function(e){var n=e.wsChanel,s=(0,o.useState)([]),r=(0,a.Z)(s,2),i=r[0],u=r[1],l=function(e){var n=JSON.parse(e.data);u((function(e){return[].concat((0,t.Z)(e),(0,t.Z)(n))}))};return(0,o.useEffect)((function(){return null===n||void 0===n||n.addEventListener("message",l),function(){return null===n||void 0===n?void 0:n.removeEventListener("message",l)}}),[n]),(0,d.jsx)("div",{style:{overflowY:"auto",height:"450px"},children:i.map((function(e,n){return(0,d.jsx)(m,{message:e},n)}))})},m=function(e){var n=e.message;return(0,d.jsxs)("div",{children:[(0,d.jsx)("img",{src:n.photo,style:{width:"20px",height:"20px"}}),(0,d.jsx)("b",{children:n.userName}),(0,d.jsx)("br",{}),n.message,(0,d.jsx)("hr",{})]})},x=function(e){var n,s=e.wsChanel,t=(0,o.useState)(!1),v=(0,a.Z)(t,2),h=v[0],f=v[1],m=function(){return f(!0)};(0,o.useEffect)((function(){return null===s||void 0===s||s.addEventListener("open",m),function(){null===s||void 0===s||s.removeEventListener("open",m)}}),[s]);var x=c.Ry({NewChatMessage:c.Z_().max(100).required()}),g=(0,i.cI)({resolver:(0,u.X)(x)}),p=g.register,j=g.handleSubmit,w=g.formState.errors,C=g.reset;return(0,d.jsxs)("form",{onSubmit:j((function(e){e.NewChatMessage&&(null===s||void 0===s||s.send(e.NewChatMessage)),C()})),children:[(0,d.jsx)("textarea",(0,r.Z)((0,r.Z)({},p("NewChatMessage")),{},{placeholder:"New Chat Message"})),(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"submit",disabled:!h||null===s,value:"Send Chat Message"})}),(0,d.jsx)("p",{className:l.Z.error,children:null===(n=w.NewChatMessage)||void 0===n?void 0:n.message})]})};n.default=v},5068:function(e,n){n.Z={userFoto:"User_userFoto__houx+",error:"User_error__SAXv6"}}}]);
//# sourceMappingURL=289.299e9741.chunk.js.map